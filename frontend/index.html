<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hackathon Platform</title>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body>
<header>
  <h1>Hackathon Platform</h1>
  <p>Full auth + role panels (Admin/User/Judge/Scanner)</p>
</header>

<main>
  <section class="card" id="authCard">
    <h2>Authentication</h2>
    <div class="split">
      <div>
        <h3>Sign Up</h3>
        <input id="suName" placeholder="Name">
        <input id="suEmail" placeholder="Email">
        <input id="suPhone" placeholder="Phone">
        <input id="suPass" placeholder="Password" type="password">
        <select id="suRole"><option>STUDENT</option><option>ADMIN</option><option>JUDGE</option><option>SCANNER</option></select>
        <button onclick="signup()">Sign Up</button>
      </div>
      <div>
        <h3>Login</h3>
        <input id="liEmail" placeholder="Email">
        <input id="liPass" placeholder="Password" type="password">
        <button onclick="login()">Login</button>
      </div>
    </div>
    <pre id="authOut"></pre>
  </section>

  <section class="card hidden" id="sessionCard">
    <h2>Session</h2>
    <p id="whoami"></p>
    <button onclick="loadMe()">Refresh /auth/me</button>
    <button onclick="logout()">Logout</button>
    <pre id="meOut"></pre>
  </section>

  <section class="grid hidden" id="adminPanel">
    <div class="card"><h3>Admin: Verify Student</h3><input id="vUser" placeholder="User ID"><select id="vStatus"><option>APPROVED</option><option>REJECTED</option></select><button onclick="verifyStudent()">Update</button><pre id="vOut"></pre></div>
    <div class="card"><h3>Admin: Create Hackathon</h3><input id="hTitle" placeholder="Title"><input id="hDesc" placeholder="Description"><button onclick="createHackathon()">Create</button><pre id="hOut"></pre></div>
    <div class="card"><h3>Admin: Problem Statement</h3><input id="psH" placeholder="Hackathon ID"><input id="psT" placeholder="Title"><input id="psD" placeholder="Description"><button onclick="createPS()">Add</button><pre id="psOut"></pre></div>
    <div class="card"><h3>Admin: Evaluation Criterion</h3><input id="cH" placeholder="Hackathon ID"><input id="cN" placeholder="Name"><input id="cW" placeholder="Weight"><button onclick="addCriterion()">Add</button><pre id="cOut"></pre></div>
    <div class="card"><h3>Admin: Generate QR</h3><input id="qU" placeholder="User ID"><input id="qH" placeholder="Hackathon ID"><select id="qP"><option>ENTRY</option><option>BREAKFAST</option><option>LUNCH</option><option>DINNER</option></select><button onclick="generateQr()">Generate</button><pre id="qOut"></pre></div>
    <div class="card"><h3>Admin: Scan Analytics</h3><input id="aH" placeholder="Hackathon ID"><button onclick="scanAnalytics()">Load</button><pre id="aOut"></pre></div>
  </section>

  <section class="grid hidden" id="userPanel">
    <div class="card"><h3>User: Upload Verification Docs</h3><input id="docId" placeholder="College ID Path"><input id="docAa" placeholder="Aadhaar Masked"><input id="docSf" placeholder="Selfie Path"><button onclick="uploadDocs()">Upload</button><pre id="docOut"></pre></div>
    <div class="card"><h3>User: Face Match</h3><button onclick="faceMatch()">Run</button><pre id="fmOut"></pre></div>
    <div class="card"><h3>User: Create Team</h3><input id="tH" placeholder="Hackathon ID"><input id="tN" placeholder="Team Name"><input id="tC" placeholder="Captain ID"><input id="tP" placeholder="Problem Statement ID"><button onclick="createTeam()">Create</button><pre id="tOut"></pre></div>
    <div class="card"><h3>User: Submit PPT</h3><input id="sT" placeholder="Team ID"><input id="sL" placeholder="PPT Link"><button onclick="submitPpt()">Submit</button><pre id="sOut"></pre></div>
  </section>
</main>
<script src="/assets/app.js"></script>
  <title>Hackathon Management System</title>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body>
  <header>
    <h1>College Hackathon Management System</h1>
    <p>End-to-end workflow: verification → registration → evaluation → QR entry/food → analytics.</p>
  </header>

  <main>
    <section class="card">
      <h2>System Health</h2>
      <button onclick="checkHealth()">Check /health</button>
      <pre id="healthOut"></pre>
    </section>

    <section class="grid">
      <div class="card">
        <h3>1) Register User</h3>
        <input id="uName" placeholder="Name" />
        <input id="uEmail" placeholder="Email" />
        <input id="uPhone" placeholder="Phone" />
        <select id="uRole">
          <option>STUDENT</option><option>ADMIN</option><option>JUDGE</option><option>SCANNER</option>
        </select>
        <button onclick="registerUser()">Register</button>
        <pre id="registerOut"></pre>
      </div>

      <div class="card">
        <h3>2) OTP Verify + Approve Student</h3>
        <input id="otpUserId" placeholder="User ID" />
        <button onclick="verifyOtp()">Verify OTP (123456)</button>
        <button onclick="approveStudent()">Approve Student</button>
        <pre id="verifyOut"></pre>
      </div>

      <div class="card">
        <h3>3) Create Hackathon</h3>
        <input id="hTitle" placeholder="Hackathon title" />
        <input id="hDesc" placeholder="Description" />
        <button onclick="createHackathon()">Create</button>
        <pre id="hackOut"></pre>
      </div>

      <div class="card">
        <h3>4) Add Problem Statement</h3>
        <input id="psHackId" placeholder="Hackathon ID" />
        <input id="psTitle" placeholder="PS Title" />
        <input id="psDesc" placeholder="PS Description" />
        <button onclick="createPS()">Add PS</button>
        <pre id="psOut"></pre>
      </div>

      <div class="card">
        <h3>5) Create Team</h3>
        <input id="tHackId" placeholder="Hackathon ID" />
        <input id="tName" placeholder="Team name" />
        <input id="tCaptain" placeholder="Captain ID" />
        <input id="tPS" placeholder="Problem Statement ID" />
        <button onclick="createTeam()">Create Team</button>
        <pre id="teamOut"></pre>
      </div>

      <div class="card">
        <h3>6) Submit Round-1 PPT</h3>
        <input id="sTeam" placeholder="Team ID" />
        <input id="sPpt" placeholder="PPT URL" />
        <button onclick="submitRound1()">Submit</button>
        <pre id="subOut"></pre>
      </div>

      <div class="card">
        <h3>7) Add Criterion + Score</h3>
        <input id="cHack" placeholder="Hackathon ID" />
        <input id="cName" placeholder="Criterion name" />
        <input id="cWeight" placeholder="Weight (e.g. 0.4)" />
        <input id="scTeam" placeholder="Team ID" />
        <input id="scJudge" placeholder="Judge ID" />
        <input id="scVal" placeholder="Score" />
        <button onclick="addCriterionAndScore()">Save</button>
        <pre id="scoreOut"></pre>
      </div>

      <div class="card">
        <h3>8) Leaderboard</h3>
        <input id="lHack" placeholder="Hackathon ID" />
        <button onclick="loadLeaderboard()">Load</button>
        <pre id="leaderOut"></pre>
      </div>

      <div class="card">
        <h3>9) Generate Meal QR + Scan</h3>
        <input id="qUser" placeholder="User ID" />
        <input id="qHack" placeholder="Hackathon ID" />
        <input id="qScanner" placeholder="Scanner ID" />
        <button onclick="genAndScan()">Generate Lunch QR + Scan</button>
        <pre id="qrOut"></pre>
      </div>
    </section>
  </main>

  <script src="/assets/app.js"></script>
</body>
</html>
